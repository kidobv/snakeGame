<canvas id="gameCanvas" width="400" height="400"></canvas>

<script type="text/javascript">
	window.onload = function(){
		 canv = document.getElementById("gameCanvas");
		 context = canv.getContext("2d");
		document.addEventListener("keydown", keyPush);
		setInterval(game,1000/10)
	}
	const gs = 20 // grid size
	const tc = 20 // tile count and grid size need to match the canavs size 
	var px=py=10  // player position within the tiles	
	var ax=ay=15 //apple initial position
	var xVector=yVector=0;
	trail = [];
	tail = 5;
	function game(){
		px+=xVector;
		py+=yVector;

		if(px < 0){
			px = tc-1;
		}
		if(px > tc-1){
			px = 0;
		}
		if(py < 0){
			py = tc-1;
		}
		if(py > tc-1){
			py = 0;
		}
		context.fillStyle = "black";
		context.fillRect(0,0,canv.width,canv.height);

		context.fillStyle = "lime";
		for(var i=0; i<trail.length; i++){
			context.fillRect(trail[i].x*gs,trail[i].y*gs,gs-2,gs-2);
			if(trail[i].x === px && trail[i].y === py){
				tail = 5;
			}
		}
		trail.push({x:px,y:py});
		while(trail.length>tail){
			trail.shift();
		}

		if(ax === px && ay === py){
			tail++;
			ax=Math.floor(Math.random()*tc)
			ay=Math.floor(Math.random()*tc)
		}
		context.fillStyle = "red";
		context.fillRect(ax*gs,ay*gs,gs-2,gs-2);
	}

	function keyPush(event){
		switch(event.keyCode){
			case 37:
			xVector=-1; yVector=0;
			break;
			case 38:
			xVector=0; yVector=-1;
			break;
			case 39:
			xVector=1; yVector=0;
			break;
			case 40:
			xVector=0; yVector=1;
			break;
		}
	}
</script>
